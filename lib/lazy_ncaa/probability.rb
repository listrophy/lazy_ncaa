class Probability
  PROBS = {
    1 => { #round 1
      1 => {16 => [108, 108]},
      2 => {15 => [108, 104]},
      3 => {14 => [108, 92]},
      4 => {13 => [108, 85]},
      5 => {12 => [108, 72]},
      6 => {11 => [108, 72]},
      7 => {10 => [108, 65]},
      8 => {9 =>  [108, 47]}
    },
    2 => { #round 2
      1 => {
        8 => [51,41],
        9 => [57,53]
      },
      2 => {
        7  => [64,46],
        10 => [40,23]
      },
      3 => {
        6  => [59,33],
        11 => [33,22]
      },
      4 => {
        5  => [58,30],
        12 => [27,16]
      },
      5 => {
        13 => [14,11]
      },
      6 => {
        14 => [13,11]
      },
      7 => {
        15 => [1,1]
      },
      10 => {
        15 => [3,3]
      },
      11 => {
        14 => [3,3]
      },
      12 => {
        13 => [9,8]
      }
    },
    3 => {
      1 => {
        4 => [38,28],
        5 => [36,30],
        12 => [18,18],
        13 => [2,2]
      },
      2 => {
        3 => [35,22],
        6 => [25,19],
        11 => [10,9]
      },
      3 => {
        7 => [8,6],
        10 => [12,8]
      },
      4 => {
        8 => [6,2],
        9 => [2,2]
      },
      5 => {
        8 => [2,0],
        9 => [2,1]
      },
      6 => {
        7 => [6,3],
        10 => [6,4]
      },
      7 => {
        11 => [3,0],
        14 => [1,1]
      },
      8 => {
        12 => [1,0],
        13 => [1,1]
      },
      10 => {
        11 => [1,1],
        14 => [1,1]
      }
    },
    4 => { #round 4
      1 => {
        2 => [36,18],
        3 => [19,11],
        6 => [8,6],
        7 => [4,4],
        10 => [4,4],
        11 => [5,2]
      },
      2 => {
        4 => [6,2],
        5 => [3,0],
        8 => [4,2],
        12 => [1,1]
      },
      3 => {
        4 => [3,2],
        5 => [3,2],
        8 => [1,1],
        9 => [1,1]
      },
      4 => {
        6 => [3,2],
        7 => [1,1],
        10 => [2,2]
      },
      5 => {
        6 => [1, 1],
        10 => [1,1]
      },
      6 => {
        8 => [1,0]
      },
      7 => {
        8 => [1,0]
      }
    },
    5 => { #all of final four
      1 => {
        2 => [16,11],
        3 => [7,3],
        4 => [7,5],
        5 => [4,4],
        6 => [2,1],
        8 => [2,1]
      },
      2 => {
        3 => [10,6],
        4 => [1,1],
        5 => [1,0],
        6 => [2,1],
        8 => [1,0],
        11 => [1,1]
      },
      3 => {
        4 => [2,2],
        8 => [1,1],
        11 => [1,1]
      },
      4 => {
        5 => [1,1],
        6 => [1,0]
      },
      5 => {
        8 => [1,1]
      },
      8 => {
        11 => [1,1]
      }
    }
  }
  # return probability that seed_a will win
  def self.ask(round, seed_a, seed_b)
    if seed_a == seed_b
      0.5
    else
      round = 5 if round == 6
      if seed_a < seed_b
        gw = PROBS[round][seed_a][seed_b]
        raise InvalidGameException if gw.nil?
        games = gw[0]
        wins = gw[1]
        1.0 * wins / games
      else
        gl = PROBS[round][seed_b][seed_a]
        raise InvalidGameException if gl.nil?
        games = gl[0]
        losses = gl[1]
        1.0 * (games - losses) / games
      end
    end
  end
end
